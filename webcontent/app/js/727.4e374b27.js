"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[727],{3828:(e,t,o)=>{o.d(t,{Z:()=>k});var s=o(9835),n=o(6970);const a=e=>((0,s.dD)("data-v-9fde52e0"),e=e(),(0,s.Cn)(),e),r={class:"text-h5"},i=a((()=>(0,s._)("div",null,null,-1)));function l(e,t,o,a,l,p){const u=(0,s.up)("pages-menu"),m=(0,s.up)("q-toolbar");return(0,s.wg)(),(0,s.j4)(m,{class:"title fit row wrap justify-between"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{active:o.active},null,8,["active"]),(0,s._)("div",r,(0,n.zw)(o.title),1),i])),_:1})}function p(e,t,o,a,r,i){const l=(0,s.up)("q-item-section"),p=(0,s.up)("q-item"),u=(0,s.up)("q-list"),m=(0,s.up)("q-menu"),c=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.j4)(c,{color:"primary",round:"",icon:"menu"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{"transition-show":"scale","transition-hide":"scale"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{style:{"min-width":"100px"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.items,(e=>((0,s.wg)(),(0,s.j4)(p,{key:e.title,to:e.link,clickable:"",class:(0,n.C_)({activeitem:o.active===e.link})},{default:(0,s.w5)((()=>[(0,s.Wm)(l,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.title),1)])),_:2},1024)])),_:2},1032,["to","class"])))),128))])),_:1})])),_:1})])),_:1})}const u={name:"pages-menu",props:["active"],data(){return{items:[{title:"Overview",link:"/overview"},{title:"Metadata",link:"/model"},{title:"Diagrams",link:"/diagram"},{title:"Monitoring",link:"/monitoring"}]}},computed:{},methods:{},watch:{},async mounted(){}};var m=o(1639),c=o(4455),d=o(5290),w=o(3246),E=o(490),H=o(1233),g=o(9984),G=o.n(g);const h=(0,m.Z)(u,[["render",p],["__scopeId","data-v-0bf92e70"]]),f=h;G()(u,"components",{QBtn:c.Z,QMenu:d.Z,QList:w.Z,QItem:E.Z,QItemSection:H.Z});const _={name:"pages-toolbar",props:["title","active"],components:{pagesMenu:f},data(){return{}},computed:{},methods:{},watch:{},async mounted(){}};var v=o(1663);const b=(0,m.Z)(_,[["render",l],["__scopeId","data-v-9fde52e0"]]),k=b;G()(_,"components",{QToolbar:v.Z})},1727:(e,t,o)=>{o.r(t),o.d(t,{default:()=>k});var s=o(9835),n=o(6970);const a=(0,s.Uk)("refresh"),r={key:0},i={key:1};function l(e,t,o,l,p,u){const m=(0,s.up)("pages-toolbar"),c=(0,s.up)("q-header"),d=(0,s.up)("q-btn"),w=(0,s.up)("q-td"),E=(0,s.up)("q-tr"),H=(0,s.up)("q-table"),g=(0,s.up)("q-page"),G=(0,s.up)("q-page-container"),h=(0,s.up)("q-layout");return(0,s.wg)(),(0,s.j4)(h,{view:"hHh LpR fFf"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{reveal:"",elevated:"",class:"bg-grey-7 text-grey-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{title:"TubeDB Monitoring",active:"/monitoring"})])),_:1}),(0,s.Wm)(G,{class:"row"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{padding:"",class:"column"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{onClick:u.refresh},{default:(0,s.w5)((()=>[a])),_:1},8,["onClick"]),(0,s.Wm)(H,{dense:"",columns:u.columns,rows:u.rows,"row-key":"plot","rows-per-page-options":[0],pagination:p.pagination,"hide-pagination":"","sort-method":u.customSort,"binary-state-sort":""},{body:(0,s.w5)((e=>[(0,s.Wm)(E,{props:e},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{key:"plot",props:e},{default:(0,s.w5)((()=>[(0,s._)("b",null,(0,n.zw)(e.row.plot),1)])),_:2},1032,["props"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.sensorColumns,(t=>((0,s.wg)(),(0,s.j4)(w,{props:e,key:t.sensor,class:(0,n.C_)(u.cellClass(t,e.row[t.sensor]))},{default:(0,s.w5)((()=>[t.number?((0,s.wg)(),(0,s.iD)("span",r,(0,n.zw)(e.row[t.sensor].toFixed(2)),1)):((0,s.wg)(),(0,s.iD)("i",i,(0,n.zw)(e.row[t.sensor]),1))])),_:2},1032,["props","class"])))),128))])),_:2},1032,["props"])])),_:1},8,["columns","rows","pagination","sort-method"])])),_:1})])),_:1})])),_:1})}o(702),o(3269);var p=o(3100),u=o(3828);const m={components:{pagesToolbar:u.Z},data(){return{data:void 0,pagination:{page:1,rowsPerPage:0},monitoring_meta:{plots:["HEG01","HEG02","HEG03","HEG04","HEG05","HEG06","HEG07","HEG08","HEG09","HEG10","HEG11","HEG12","HEG13","HEG14","HEG15","HEG16","HEG17","HEG18","HEG19","HEG20","HEG21","HEG22","HEG23","HEG24","HEG25","HEG26","HEG27","HEG28","HEG29","HEG30","HEG31","HEG32","HEG33","HEG34","HEG35","HEG36","HEG37","HEG38","HEG39","HEG40","HEG41","HEG42","HEG43","HEG44","HEG45","HEG46","HEG47","HEG48","HEG49","HEG50"],sensors:[{sensor:"UB",ok:[14,20],warn:[13,25]},{sensor:"Ta_200",ok:[10,17],warn:[5,20]},{sensor:"rH_200",ok:[60,90],warn:[50,95]}]}}},computed:{...(0,p.Se)({apiGET:"apiGET"}),columns(){let e=[{name:"plot",field:"plot",label:"Plot",sortable:!0}];return void 0!==this.monitoring_meta&&this.monitoring_meta.sensors.forEach((t=>{console.log(t);const o=t.sensor+".datetime";e.push({name:o,field:o,label:"datetime",sortable:!0}),e.push({name:t.sensor,field:t.sensor,label:t.sensor,sortable:!0})})),e},columnMap(){let e={plot:{sortType:"text"}};return void 0!==this.monitoring_meta&&this.monitoring_meta.sensors.forEach((t=>{const o=t.sensor+".datetime";e[t.sensor]={sortType:"number"},e[o]={sortType:"text"}})),e},sensorColumns(){let e=[];return void 0!==this.monitoring_meta&&this.monitoring_meta.sensors.forEach((t=>{const o=t.sensor+".datetime";e.push({sensor:o,number:!1}),e.push({sensor:t.sensor,number:!0,ok:t.ok,warn:t.warn})})),e},rows(){if(void 0===this.data)return[];const e=this.data.sensors;let t=this.data.measurements.map((t=>{let o={plot:t.plot};const s=t.datetime,n=t.value;for(let a=0;a<e.length;a++){const t=e[a],r=t+".datetime";o[r]=s[a],o[t]=n[a]}return o}));return t}},methods:{async refresh(){try{const e=new URLSearchParams;this.monitoring_meta.plots.forEach((t=>e.append("plot",t))),this.monitoring_meta.sensors.forEach((t=>e.append("sensor",t.sensor)));const t=await this.apiGET(["tsdb","monitoring"],{params:e});this.data=t.data}catch(e){this.data=void 0,console.log(e),this.$q.notify({message:"Error loading data.",type:"negative"})}},cellClass(e,t){return e.number?e.ok?e.ok[0]<=t&&t<=e.ok[1]?"sensor-ok":e.warn&&e.warn[0]<=t&&t<=e.warn[1]?"sensor-warn":"sensor-error":e.warn?e.warn[0]<=t&&t<=e.warn[1]?"sensor-warn":"sensor-error":"":""},customSort(e,t,o){const s=[...e];if(t){const e=this.columnMap[t];let n;switch(e.sortType){case"number":n=o?(e,o)=>parseFloat(o[t])-parseFloat(e[t]):(e,o)=>parseFloat(e[t])-parseFloat(o[t]);break;default:n=o?(e,o)=>o[t]>e[t]?1:o[t]<e[t]?-1:0:(e,o)=>e[t]>o[t]?1:e[t]<o[t]?-1:0}void 0!==n&&s.sort(n)}return s}},watch:{},async mounted(){}};var c=o(1639),d=o(249),w=o(6602),E=o(2133),H=o(9885),g=o(4455),G=o(7580),h=o(9546),f=o(7220),_=o(9984),v=o.n(_);const b=(0,c.Z)(m,[["render",l],["__scopeId","data-v-80b141cc"]]),k=b;v()(m,"components",{QLayout:d.Z,QHeader:w.Z,QPageContainer:E.Z,QPage:H.Z,QBtn:g.Z,QTable:G.Z,QTr:h.Z,QTd:f.Z})}}]);