<!DOCTYPE html>
<html lang="en">
<head>
<title>TubeDB</title>
<meta name="robots" content="noindex, nofollow" />
<meta charset="utf-8">
<link rel="icon" type="image/png" href="favicon.png" />
<link rel="stylesheet" href="./fonts/fonts.css" type="text/css">
<script src="vue.min.js"></script>
<script src="axios.min.js"></script>
<style type="text/css">
button.linkbutton { width: 170px; }
table { background-color:#f6f6f6; }
body { 
	margin: 0px; 
	background-color:#e6e6e6;
	font-size: 0.9em;
	font-family: Roboto,sans-serif;
}

h1 {
	font-size: 3em;
	/*font-family: serif;*/
}

div.bg {
	background-image: url(timeseries_bg3.png);
	background-position: top left;
	background-size: 100%;
}

/*#center { width: 800px; height: auto; margin-left: auto; margin-right: auto; line-height:60px; }*/



.horizontal-box {
  display: flex;
  flex-flow: row;
}

.spacer {
  flex: auto;
}
#center {
  flex: none;
}

.vertical-box {
  display: flex;
  flex-flow: column;
}

td {
    padding: 10px;
}

#infobox {
	flex: auto;
	background-color:#f6f6f6;
}

.link_button {/* derived from generated by css-button-generator.com */
	width: 160px;
	text-align:center;
	
	/*font-size:16px;
	font-family:Arial;
	font-weight:normal;*/
	font-size:12px;
	/*font-family: sans-serif;*/
	font-weight:normal;
	-moz-border-radius:5px;
	-webkit-border-radius:5px;
	border-radius:5px;
	border:1px solid #9c9c9c;
	/*padding:9px 18px;*/
	padding:4px 3px;
	text-decoration:none;
	background:-moz-linear-gradient( center top, #f9f9f9 5%, #bbb 100% );
	background:-ms-linear-gradient( top, #f9f9f9 5%, #bbb 100% );
	filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f9f9f9', endColorstr='#bbb');
	background:-webkit-gradient( linear, left top, left bottom, color-stop(5%, #f9f9f9), color-stop(100%, #bbb) );
	background-color:#f9f9f9;
	color:black;
	display:inline-block;
	text-shadow:1px 1px 0px #ddd;
 	-webkit-box-shadow:inset 1px 1px 0px 0px #eee;
 	-moz-box-shadow:inset 1px 1px 0px 0px #eee;
 	box-shadow:inset 1px 1px 0px 0px #eee;
}.link_button:hover {
	background:-moz-linear-gradient( center top, #f9f9ff 5%, #bbf 100% );
	background:-ms-linear-gradient( top, #f9f9ff 5%, #bbf 100% );
	filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f9f9ff', endColorstr='#bbf');
	background:-webkit-gradient( linear, left top, left bottom, color-stop(5%, #f9f9ff), color-stop(100%, #bbf) );
	background-color:#f9f9ff;
	border-color:#7777ff;
	text-shadow:1px 1px 0px #bbf;
}.link_button:active {
	position:relative;
	top:1px;
	background:-moz-linear-gradient( center top, #f0f0f9 5%, #aae 100% );
	background:-ms-linear-gradient( top, #f0f0f9 5%, #aae 100% );
	filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f0f0f9', endColorstr='#aae');
	background:-webkit-gradient( linear, left top, left bottom, color-stop(5%, #f0f0f9), color-stop(100%, #aae) );
	background-color:#f0f0f9;
	/*background-color:#aae;*/
	border-color:#8c8cef;
	text-shadow:1px 1px 0px #88a;
}

.beta {
	opacity: 0.7;
}

.deprecated {
	opacity: 0.7;
}

#app {
	position: absolute; 
	top: 25px; 
	right: 2px;
	/*background-color: #4D472BE6;*/
	opacity: 0.6;
	text-align: left;
	/*font-family: sans-serif;*/
	font-size:10px;
}

</style>

<script>
"use strict";
document.addEventListener('DOMContentLoaded', function() {init();}, false);

function init() {
	
var app = new Vue({
	
el: '#app',

data: {
	loadingMessage: "init...",
	identity: {},
},

methods: {
	getHTTPS_url: function() {
		var port = this.identity.https_port;
		
		var host = window.location.host;
		var pIndex = host.indexOf(':');
		if(pIndex >= 0) {
			host = host.slice(0, pIndex);
		}
		host = host + ':' + port;		
		return 'https://' + host + window.location.pathname;
	},
},

computed: {
	HTTPS_url: function() {
		return this.getHTTPS_url();
	},
},

mounted: function () {
	var self = this;
	self.loadingMessage =  "loading...";
	axios.get("../tsdb/identity")
	.then(function(response) {
		self.loadingMessage = undefined;
		self.identity = response.data;			
	})
	.catch(function(error) {
		self.loadingMessage = "ERROR " +error;
	});
},

});

}
</script>

</head>
<body>

<div id="app">
	<span v-if="loadingMessage != undefined">
		{{loadingMessage}}
	</span>
	<span v-if="loadingMessage == undefined">
		tubedb version: {{identity.tubedb_version}}
		<br>user{{identity.auth_method == "IP" ? " (by "+"ip"+")": ""}}: {{identity.user}}
		<br>ip: {{identity.ip}}
		<br>access: {{identity.roles.join(", ")}}
		<br>connection: {{identity.https_port === undefined || identity.request_port !== identity.https_port ? 'plain' : 'encrypted'}}
		<span v-if="identity.https_port !== undefined && identity.request_port !== identity.https_port">
		<br> ==> <a :href="getHTTPS_url()" target="_blank">HTTPS</a>
		</span>
	</span>
</div>

<div class="bg">
<div style="text-align:right">
	<button onclick="show_instructions_English()"><b>[i]</b> (English)</button>
	<button onclick="show_instructions_Deutsch()"><b>[i]</b> (Deutsch)</button>
</div>
<h1 style="text-align:center">TubeDB</h1>
<hr/>
</div>
<div id="div_instructions_English" style="display:none">
<script type="text/javascript">
function show_instructions_English() {
	if(document.getElementById("div_instructions_English").style.display==="none") {
		document.getElementById("div_instructions_English").style.display = "inline";
		document.getElementById("div_instructions_Deutsch").style.display = "none";
	} else {
		document.getElementById("div_instructions_English").style.display = "none";
		document.getElementById("div_instructions_Deutsch").style.display = "none";
	}
}
</script>
<h2>Help</h2>
This is the central start-page of TubeDB Web Interface.
<br>
<br>You can navigate to a desired view by clicking on one of the buttons below.
<br>Each sub-page contains a link "main-page" at top-right position to navigate back to this start-page and a [i]-button to toggle help.
<br>
<br>The "Infobox" below shows some update information about the contained data.
<hr/>
</div>

<div id="div_instructions_Deutsch" style="display:none">
<script type="text/javascript">
function show_instructions_Deutsch() {
	if(document.getElementById("div_instructions_Deutsch").style.display==="none") {
		document.getElementById("div_instructions_Deutsch").style.display = "inline";
		document.getElementById("div_instructions_English").style.display = "none";
	} else {
		document.getElementById("div_instructions_Deutsch").style.display = "none";
		document.getElementById("div_instructions_English").style.display = "none";
	}
}
</script>
<h2>Anleitung</h2>
Dies ist die Startseite des TubeDB Web Interface.
<br>
<br>Sie können zu einer gewünschten Ansicht navigieren, indem Sie auf eine der Schaltflächen unten klicken.
<br>Jede Unterseite enthält oben rechts einen Link zurück zur Startseite und eine [i]-Schaltfläche, um eine Anleitung aufzurufen.
<br>
<br>Die "Infobox" unten zeigt einige Aktualisierungsinformationen der enthaltenen Daten.
<hr/>
</div>

<div class="horizontal-box">
<div class="spacer"></div>
<div id="center">
<div class="vertical-box">
<table>
<colgroup>
    <!--<col width="100px" height="50px"/>
	<col width="100px" height="50px"/>
    <col width="600px" height="50px"/>-->
</colgroup>
<tr><td></td><td><a class="link_button" href="visualisation_meta/visualisation_meta.html">visualisation</a></td><td><b>visualisation</b> of climate data</td></tr>
<tr><td></td><td><a class="link_button" href="export.html">export</a></td><td><b>download</b> time series data</td></tr>
<tr><td></td><td><a class="link_button" href="map2/map2.html">map</a></td><td>interactive <b>map</b> of plots</td></tr>
<tr><td></td><td><a class="link_button" href="status2/status.html">status</a></td><td>interactive detailed <i>up-to-date</i> <b>status</b> of plots</td></tr>
<tr><td></td><td><a class="link_button" href="catalog/catalog.html">source catalog</a></td><td>interactive <b>catalog</b> of imported data files</td></tr>
<tr><td></td><td><a class="link_button" href="../supplement/index.html">auxiliary files</a></td><td>supplementary <b>content</b></td></tr>
<tr><td></td><td><a class="link_button" href="app">app</a></td><td>TubeDB <b>web app</b></td></tr>
<!--<tr class="deprecated"><td>(deprecated)</td><td><a class="link_button" href="../tsdb/source_catalog.csv" download="source_catalog.csv">download source catalog</a></td><td>listing of imported data files as CSV</td></tr>-->
</table>
<div class="entry"><hr></div>
<div class="entry">Infobox</div>
<br>
<!--<iframe width="800px" height="200px" src="../files/info.html"></iframe>-->
<iframe id="infobox" height="300px" src="../files/info.html"></iframe>
</div><!--END vertical-box-->
</div><!--END center-->
<div class="spacer"></div>
</div><!--END horizontal-box-->


</body>

</html>